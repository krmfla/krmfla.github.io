<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Liff test</title>
    <style>
        .result {
            width: 100%;
            word-break: break-all;
            padding: 10px;
            box-sizing: border-box;
        }
        button {
            min-width: 125px;
            margin: 5px 10px 10px;
            padding: 5px;
        }
    </style>
</head>

<body>
    <h1>LIFF Redirect 15:00</h1>
    <p>轉址處理...</p>
    <div id='result' class='result'></div>
<!--     <button id='btn1'>登入</button> -->
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
//       var btn1 = document.getElementById('btn1');
      window.onerror = function(err, xhr, message) {
        result.innerText = (err + ', ' + xhr + ', ' + message);
      }

      window.onload = function() {
        liff.init({'liffId': '1612283647-ErKMBLpB'})
          .then(()=> {
            result.innerText += '已初始化。';
            if (liff.isLoggedIn()) {
                result.innerText += '已登入。';
            } else {
                result.innerText += '尚未登入。';
                liff.login({redirectUri: window.location.href});
//                 liff.openWindow({
//                   url: `https://line.me/R/ti/p/@atk7014e`,
// //                   url: 'www.google.com',
//                   external: false
                });
            }
            
          })
      }
      function findGetParameter(parameterName) {
        var result = null,
            tmp = [];
        location.search
            .substr(1)
            .split("&")
            .forEach(function (item) {
                tmp = item.split("=");
                if (tmp[0] === parameterName)
                    result = decodeURIComponent(tmp[1]);
            });
        return result;
      }
    </script>
</body>
</html>
