<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Liff test</title>
    <style>
        .result {
            width: 100%;
            word-break: break-all;
            padding: 10px;
            box-sizing: border-box;
        }
        button {
            min-width: 125px;
            margin: 5px 10px 10px;
            padding: 5px;
        }
    </style>
    <script src="https://static.line-scdn.net/liff/edge/versions/2.3.0/sdk.js"></script>
</head>

<body>
    <h1>LIFF test 11:38</h1>
    <p>åˆ†äº«å‰è«‹å…ˆç™»å…¥åŠåˆå§‹åŒ–</p>
    <div id='result' class='result'></div>
    <button id='btn5'>ç™»å…¥</button>
    <button id='btn6'>ç™»å‡º</button>
    <button id='btn1'>åˆå§‹åŒ–</button>
    <button id='btn3'>å–å¾—å€‹äººè³‡æ–™</button>
    <button id='btn4'>å–å¾—æˆæ¬Šç¢¼</button>
    <button id='btn2'>è¨Šæ¯åˆ†äº«</button>
    <button id='btn7'>åœ–æ–‡è¨Šæ¯åˆ†äº«</button>
    <button id='btn8'>æŒ‰éˆ•å¼è¨Šæ¯åˆ†äº«</button>
    <button id='btn9'>å‹•ç•«+æŒ‰éˆ•è¨Šæ¯åˆ†äº«</button>
    <button id='btn10'>getContext</button>
    <script>
      var btn1 = document.getElementById('btn1');
      var btn2 = document.getElementById('btn2');
      var btn3 = document.getElementById('btn3');
      var btn4 = document.getElementById('btn4');
      var btn5 = document.getElementById('btn5');
      var btn6 = document.getElementById('btn6');
      var btn7 = document.getElementById('btn7');
      var btn8 = document.getElementById('btn8');
      var btn9 = document.getElementById('btn9');
      var btn10 = document.getElementById('btn10');
      var result = document.getElementById('result');
        
      window.onerror = function(err, xhr, message) {
        result.innerText = (err + ', ' + xhr + ', ' + message);
      }

      btn1.onclick = async function() {
        await liff.init({liffId: "1612283647-VQeR60d6"});
        if(liff.isLoggedIn()){
          alert('å·²åœ¨ç™»å…¥ç‹€æ…‹');
        } else {
          alert('å°šæœªç™»å…¥');
        }
      }
      btn2.onclick = function() {
        liff.shareTargetPicker([
          {
            type: "text",
            text: "ä¸€ç·’ã«ã‚ªãƒ©ã‚ªãƒ©ã‚ªãƒ©ã‚ªãƒ©\r\nğŸ’«ğŸ’¥ğŸ¤›ğŸ¤›ğŸ¤›ğŸ‘ŠğŸ‘ŠğŸ‘ŠğŸ’¥ğŸ’«\r\nhttps://web.archive.org/web/20150407071659/http://jojogame.bngames.net/asb/"
          }
        ])
        .then(res => { 
            //alert(JSON.stringify(res)) 
        })
        .catch(function(err) {
          alert(JSON.stringify(err));
        });
      }
      btn3.onclick = function() {
        liff.getProfile()
            .then(data => {
              result.innerText = JSON.stringify(data);
            })
            .catch((err) => {
              result.innerText = JSON.stringify(err);
            });
      }
      btn4.onclick = function() {
        var token = liff.getAccessToken();
        result.innerText = JSON.stringify(token);
      }
      btn5.onclick = function() {
          liff.login();
          alert('å·²ç™»å…¥');
      }
      btn6.onclick = function() {
          liff.logout();
          alert('å·²ç™»å‡º');
      }
      btn7.onclick = function() {
          liff.shareTargetPicker([{
            type: "flex",
            altText: "å¥½åº·åˆ†äº«~ä¾†NISSANé ç´„è©¦ä¹˜ï¼Œè³¼è»ŠåŠ é€ä¿ä¿®ç¦®åˆ¸3,000å…ƒå–”ï¼",
            contents: {
                type: "bubble",
                size: "kilo",
                hero: {
                    type: "image",
                    url: "https://krmfla.github.io/example/liff_test/flex_test2.png",
                    size: "full",
                    aspectRatio: "1:1",
                    aspectMode: "cover",
                    action: {
                        type: "uri",
                        uri: "https://line.me/R/ti/p/@nissan.tw"
                    }
                }
            }
          }]);
      }
        btn8.onclick = function() {
            liff.shareTargetPicker([{
              "type": "template",
              "altText": "èƒ½é‡å¤§æ¼²ï¼æ–°æ˜¥é‹å‹¢é–‹ç´…ç›¤ï¼Œç™»éŒ„ç™¼ç¥¨æŠ½10è¬ç´…åŒ…",
              "template": {
                  "type": "buttons",
                  "thumbnailImageUrl": "https://campaign.friendo.com.tw/2021CBCNY/images/share.jpg",
                  "imageAspectRatio": "rectangle",
                  "imageSize": "cover",
                  "imageBackgroundColor": "#000000",
                  "title": "ç‰›å¹´å¤§æ¼²",
                  "text": "å¿«ä¾†æ¸¬è©¦ä½ çš„å¥½æ‰‹æ°£",
                  "defaultAction": {
                      "type": "uri",
                      "label": "æ¸¬å­—å»",
                      "uri": "https://campaign.friendo.com.tw/2021CBCNY/"
                  },
                  "actions": [
                      {
                        "type": "uri",
                        "label": "æ¸¬å­—å»",
                        "uri": "https://liff.line.me/1654902258-GYvepqEX"
                      },
                                {
                        "type": "uri",
                        "label": "çœ‹å¾—çå…¬å‘Š",
                        "uri": "https://campaign.friendo.com.tw/2021CBCNY/awards.html"
                      }
                  ]
              }
            }]);
        }
        btn9.onclick = function() {
            liff.shareTargetPicker([
                {
                  "type": "flex",
                  "altText": "æ‚¨æœ‰ä¸€å¼µå¥—é¤å…Œæ›åˆ¸å°šæœªé ˜å–å–”~",
                  "size": "kilo",
                  "contents": {
                    "type": "bubble",
                    "header": {
                      "type": "box",
                      "layout": "vertical",
                      "backgroundColor": "#FFFFFF",
                      "contents": [
                        {
                          "type": "text",
                          "text": "ğŸ¦ğŸ§¡~é¾è¦å¥—é¤å…Œæ›åˆ¸~ğŸ§¡ğŸ¦",
                          "gravity": "center",
                          "align": "center",
                          "size": "md",
                          "weight": "regular"
                        }
                      ]
                    },
                    "body": {
                      "type": "box",
                      "layout": "vertical",
                      "backgroundColor": "#f7b6c0",
                      "contents": [
                        {
                          "type": "image",
                          "url": "https://krmfla.github.io/images/ezgif.png",
                          "size": "lg",
                          "aspectMode": "cover",
                          "aspectRatio": "1:1.2",
                          "gravity": "center",
                          "animated": true
                        }
                      ],
                      "paddingAll": "0px"
                    },
                    "footer": {
                      "type": "box",
                      "layout": "vertical",
                      "contents": [
                        {
                          "type": "button",
                          "action": {
                            "type": "uri",
                            "label": "è©¦è©¦ä½ çš„å¥½æ‰‹æ°£",
                            "uri": "https://showcase.friendo.com.tw/chamonixlovesea/"
                          },
                          "style": "primary"
                        },
                        {
                          "type": "button",
                          "action": {
                            "type": "uri",
                            "label": "å‰å¾€ç²‰çµ²åœ˜",
                            "uri": "https://www.facebook.com/chamonix.com.tw/"
                          },
                          "style": "link",
                          "color": "#ffac40"
                        }
                      ]
                    }
                  }
                }
            ])
        }
        btn10.onclick = function() {
            const context = liff.getContext();
            result.innerText = JSON.stringify(context);
        }
    </script>
</body>
</html>
