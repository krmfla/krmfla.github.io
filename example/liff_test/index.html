<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Liff test</title>
    <script src="https://static.line-scdn.net/liff/edge/versions/2.3.0/sdk.js"></script>
</head>

<body>
    <h1>Liff test 16:51</h1>
    <button id='btn1'>INIT/LOGIN</button>
    <button id='btn2'>SHARE</button>
    <button id='btn3'>TEST</button>
    
    <script>
      window.onerror = function(err, xhr, message) {
        alert(err + ', ' + xhr + ', ' + message);
      }
      var btn1 = document.getElementById('btn1');
      var btn2 = document.getElementById('btn2');
      var btn3 = document.getElementById('btn3');
        
      btn3.onclick = function() { document.body.innerHTML += "<p>click</p>"; }
      
      btn2.addEventListener('click', function() {
          alert('CLICK');
          liff.shareTargetPicker([
            { type: "text", text: "OLA-OLA-OLA-OLA" }
          ]).then(res => { alert(res); }).catch(function(err) {
            alert(err);
          });
      });
        
//       btn_2.onclick = function() {
//         alert('CLICK');
//         liff.shareTargetPicker([
//           {
//             type: "text",
//             text: "OLA-OLA-OLA-OLA"
//           }
//         ])
//         .then(res => { alert(res); })
//         .catch(function(err) {
//           alert(err);
//         });
//       }
        
      btn1.onclick = async function() {
        await liff.init({liffId: "1612283647-VQeR60d6"});
        if(liff.isLoggedIn()){
          //已經登入
          document.body.innerHTML += "<p>已登入</p>";
        } else { 
          liff.login();
        }
      }
    </script>
</body>
</html>
