"use strict";var synth=window.speechSynthesis,index_view=new Vue({el:"#app",data:{stage:"prepare",award_name:"",lucky_list:[{department:"業務部",name:"邱泯瑄",nickname:"Kelly"},{department:"營運企劃",name:"黃俞禎",nickname:"Irene"},{department:"媒體部",name:"洪卉俞",nickname:"Claire"}],select_options:[{id:1,title:"一年以上貳獎"}],event_type:"regular",award_id:null,api_host:"http://52.220.49.115:8090",ajax_wait:!1,show_setting:!1,voices:[],options:"",voice_select:""},methods:{slicing:function(t){return t.slice(0,12)},handle_type_change:function(){this.award_id=null,this.handle_focus()},handle_focus:function(){console.log("handle_focus");var t=document.getElementById("select_bar1"),e=document.getElementById("select_bar2");t.blur(),e.blur()},init:function(){var e=this;this.prepare=lottie.loadAnimation({path:"static/gacha01.json",container:document.getElementById("lottery-prepare"),renderer:"svg",loop:!0,autoplay:!0}),this.lottery_start=lottie.loadAnimation({path:"static/gacha02.json",container:document.getElementById("lottery-start"),renderer:"svg",loop:!1,autoplay:!1}),this.lottery_start.setSpeed(1.5),this.lottery_start.onComplete=function(){console.log("complete"),e.stage="result"},axios.defaults.headers.common.Authorization="Bearer 1234",document.addEventListener("keydown",function(t){console.log(t.keyCode),13===t.keyCode&&e.start_draw()}),this.get_options()},get_start:function(){this.stage="start",this.lottery_start.play(),this.get_options()},reset:function(){this.stage="prepare",this.lottery_start.stop(),this.award_id=null,this.ajax_wait=!1},skip_anime:function(){this.stage="result",this.lottery_start.stop()},get_options:function(){},display_prev:function(){this.stage="result"},start_draw:function(){if(!this.ajax_wait&&"prepare"===this.stage)if("regular"!==this.event_type||this.award_id)switch(this.event_type){case"regular":this.call_draw_api();break;case"addition":this.call_addition_api()}else alert("尚未選擇抽獎項目")},speech_init:function(){this.voices=synth.getVoices().sort(function(t,e){t=t.name.toUpperCase(),e=e.name.toUpperCase();return t<e?-1:t==e?0:1}),console.log(this.voices);for(var t=0;t<this.voices.length;t++){var e='<option data-lang="'.concat(this.voices[t].lang,'" data-name="').concat(this.voices[t].name,'">');e+="".concat(this.voices[t].name," (").concat(this.voices[t].lang,")"),this.voices[t].default&&(e+=" -- DEFAULT"),e+="</option>",this.options+=e}console.log(this.options)},speak_action:function(){if(synth.speaking)console.error("speechSynthesis.speaking");else{for(var t=new SpeechSynthesisUtterance("業務部邱泯瑄, 營運企劃黃俞禎, 媒體部洪卉俞"),e=(t.onend=function(t){console.log("SpeechSynthesisUtterance.onend")},t.onerror=function(t){console.error("SpeechSynthesisUtterance.onerror")},voiceSelect.selectedOptions[0].getAttribute("data-name")),a=0;a<voices.length;a++)if(voices[a].name===e){t.voice=voices[a];break}t.pitch=pitch.value,t.rate=rate.value,synth.speak(t)}},call_draw_api:function(){var t=this;t.get_start()},call_addition_api:function(){var e=this,a=this;this.ajax_wait=!0,axios.post("".concat(this.api_host,"/drawAdditional")).then(function(t){t=t.data;t.message?alert(t.message):(a.award_name=t.data.prizeTitle,a.lucky_list=t.data.nameList,a.get_start()),e.ajax_wait=!1}).catch(function(t){e.ajax_wait=!1,console.error(t)})},call_reset_api:function(){var t=this;window.confirm("是否確認要重置獎項?")&&axios.post("".concat(t.api_host,"/resetDraw")).then(function(t){t=t.data;t.message&&alert(t.message)})}},mounted:function(){var t=window.localStorage.getItem("api_host");t&&(this.api_host=t),this.init(),this.is_ready=!0,this.speech_init()}});
//# sourceMappingURL=index.js.map
