"use strict";var index_view=new Vue({el:"#app",data:{stage:"prepare",award_name:"",lucky_list:[],select_options:[{id:1,title:"一年以上貳獎"}],event_type:"regular",award_id:null,api_host:"http://52.220.49.115:8090",ajax_wait:!1},methods:{slicing:function(t){return t.slice(0,12)},handle_type_change:function(){this.award_id=null,this.handle_focus()},handle_focus:function(){console.log("handle_focus");var t=document.getElementById("select_bar1"),a=document.getElementById("select_bar2");t.blur(),a.blur()},init:function(){var a=this;this.prepare=lottie.loadAnimation({path:"static/gacha01.json",container:document.getElementById("lottery-prepare"),renderer:"svg",loop:!0,autoplay:!0}),this.lottery_start=lottie.loadAnimation({path:"static/gacha02.json",container:document.getElementById("lottery-start"),renderer:"svg",loop:!1,autoplay:!1}),this.lottery_start.setSpeed(1.25),this.lottery_start.onComplete=function(){console.log("complete"),a.stage="result"},axios.defaults.headers.common.Authorization="Bearer 1234",document.addEventListener("keydown",function(t){console.log(t.keyCode),13===t.keyCode&&a.start_draw()}),this.get_options()},get_start:function(){this.stage="start",this.lottery_start.play(),this.get_options()},reset:function(){this.stage="prepare",this.lottery_start.stop(),this.award_id=null,this.ajax_wait=!1},skip_anime:function(){this.stage="result",this.lottery_start.stop()},get_options:function(){var a=this;axios.post("".concat(this.api_host,"/getDrawConfigList")).then(function(t){a.select_options=t.data.data,console.log(t.data)}).catch(function(t){alert(t)})},display_prev:function(){this.stage="result"},start_draw:function(){if(!this.ajax_wait&&"prepare"===this.stage)if("regular"!==this.event_type||this.award_id)switch(this.event_type){case"regular":this.call_draw_api();break;case"addition":this.call_addition_api()}else alert("尚未選擇抽獎項目")},call_draw_api:function(){var a=this,e=this;e.get_start(),this.ajax_wait=!0,axios.post("".concat(this.api_host,"/drawWithConfigID"),{configID:this.award_id}).then(function(t){t=t.data;t.message?alert(t.message):(e.award_name=t.data.prizeTitle,e.lucky_list=t.data.nameList,e.get_start()),a.ajax_wait=!1}).catch(function(t){a.ajax_wait=!1,console.error(t)})},call_addition_api:function(){var a=this,e=this;this.ajax_wait=!0,axios.post("".concat(this.api_host,"/drawAdditional")).then(function(t){t=t.data;t.message?alert(t.message):(e.award_name=t.data.prizeTitle,e.lucky_list=t.data.nameList,e.get_start()),a.ajax_wait=!1}).catch(function(t){a.ajax_wait=!1,console.error(t)})},call_reset_api:function(){var t=this;window.confirm("是否確認要重置獎項?")&&axios.post("".concat(t.api_host,"/resetDraw")).then(function(t){t=t.data;t.message&&alert(t.message)})}},mounted:function(){var t=window.localStorage.getItem("api_host");t&&(this.api_host=t),this.init(),this.is_ready=!0}});
//# sourceMappingURL=index.js.map
